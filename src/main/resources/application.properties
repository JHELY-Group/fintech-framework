# Server configuration
spring.config.import=optional:file:./secrets.properties
server.port=${PORT:10000}
server.servlet.session.persistent=${PRODUCTION_MODE:false}

# Branding configuration (whitelabel support)
app.branding.name=${APP_NAME:JHELY FinTech Framework}
app.branding.short-name=${APP_SHORT_NAME:FinTech}
app.branding.logo-url=${APP_LOGO_URL:https://jhely.com/icons/jhelyLogoYellow.svg}
app.branding.company-name=${APP_COMPANY_NAME:Some Company Ltd}



# Logging configuration
logging.level.org.atmosphere=warn
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=INFO
logging.level.okhttp3.logging.HttpLoggingInterceptor=DEBUG
logging.level.okhttp3.root=DEBUG
logging.level.org.jhely.money.base.api.bridge=DEBUG

# Bridge API configuration
bridge.mode=sandbox
bridge.sandbox.base-url=https://api.sandbox.bridge.xyz
bridge.sandbox.api-key=${BRIDGE_SANDBOX_API_KEY}
bridge.live.base-url=https://api.bridge.xyz
bridge.live.api-key=${BRIDGE_LIVE_API_KEY}
# Optional: currently active webhook id (used by admin endpoints if set)
bridge.webhook.id=
# Bridge webhook provisioning & verification
# If enabled, the app will create/ensure a webhook endpoint on Bridge at startup and cache its public key for signature verification.
# - Set either bridge.webhook.url OR bridge.webhook.app-public-base-url (the latter will append /api/bridge/webhook)
# - Optionally set bridge.webhook.event-categories as a comma-separated list (defaults: customer,kyc_link)
bridge.webhook.auto-provision=false
# bridge.webhook.url=https://your-domain.example.com/api/bridge/webhook
# bridge.webhook.app-public-base-url=https://your-domain.example.com
# Optional override for verification if you manage keys out-of-band; when auto-provisioning, the public key is fetched from Bridge
bridge.webhook.public-key=${BRIDGE_WEBHOOK_PUBLIC_KEY}
# Legacy HMAC fallback (not used when a public key is present). Header format: Bridge-Signature: t=timestamp,v1=hex(hmac_sha256("t.payload", secret))
bridge.webhook.secret=

# OpenAI configuration
openai.base-url=https://api.openai.com/v1
openai.api-key=${OPENAI_API_KEY}
openai.org-id=${OPENAI_ORG_ID}
openai.project-id=${OPENAI_PROJECT_ID}
openai.webhook-secret=${OPENAI_WEBHOOK_SECRET}

# Spring AI configuration
spring.threads.virtual.enabled=true
spring.ai.openai.api-key=${OPENAI_API_KEY}
spring.ai.openai.chat.options.model=gpt-4o-mini

spring.devtools.restart.enabled=true

spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=11MB

spring.mustache.check-template-location=false

spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Let Hibernate use modern MySQL dialect (avoids deprecation warnings)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true

spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1

spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.from=${MAIL_FROM}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_SSL_TRUST}
spring.mail.properties.mail.debug=true

# Stripe configuration
stripe.api-key=${STRIPE_API_KEY}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}

# Vaadin configuration
vaadin.launch-browser=false
vaadin.productionMode=${PRODUCTION_MODE:false}
# Restrict scanning to our app packages to avoid generated SDK classes
vaadin.allowed-packages=com.vaadin,org.vaadin,org.jhely.money.base

# Application configuration
app.security=
app.otp.ttl-seconds=300
app.otp.resend-cooldown-seconds=45

# Demo login (optional). When set, the login page shows a "Demo Login" button that signs in instantly.
demo.login.email=${DEMO_LOGIN_EMAIL:}

